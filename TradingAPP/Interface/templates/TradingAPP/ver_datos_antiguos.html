{% extends "base_generic_login.html" %}

{% block content %}

{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'TradingAPP/style.css' %}" xmlns="http://www.w3.org/1999/html">

<!DOCTYPE html>
<html>

<title>TradingAPP</title>

<H1 align="center"><img src="/static/TradingAPP/imagenes/logo.png" width="15%"/></br>TradingAPP</H1>

<H2 align="center">Ver anteriores datos de mercado</H2>

<br>

<body>

{% if sesion.datos_mercado%}

<div style="float: left; width: 45%;">
    <form action="./" method="POST"> {% csrf_token %}

        <br>
        <p><b>Los datos que se usarán serán aquellos encontrados en el apartado de Gestión de Datos del menú principal.</b> <br> <br>
        </p>

        <!-- MERCADO -->
        <p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;El mercado a ver es: {{ sesion.datos_mercado }}</b> <br> <br>
        </p>

        <!-- TIMEFRAME -->
        <p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;El marco de tiempo de los datos es: {{ sesion.marco_tiempo }}</b> <br> <br>
        </p>

        <!-- DATOS -->
        <p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tenemos datos desde: {{ sesion.datos_inicio }}</b> <br> <br>
        </p>


        <!-- SELECCIONAR FECHA INICIO -->

        <p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fecha inicio:</b> <br> <br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="datetime-local" name="fecha_inicio" required/> <br> <br>
        </p>

        <!-- SELECCIONAR FECHA FIN O NUMERO HORAS-->

        <p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fecha fin:</b> <br> <br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="datetime-local" name="fecha_fin" required/> <br> <br>
        </p>


        <br> <br> <br>


        <!-- BOTON FINAL -->

        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="boton" type="submit" value="Ver gráfica"/>
         <br> <br> <br> <br>
    </form>
</div>
<div style="float: left; width: 45%;">
    {% if grafico %}
    {{ grafico|safe }}
    {%endif%}
</div>

<div style="float: left; width: 45%;">
    <br><br>
    <form action="./" method="POST"> {% csrf_token %}
        {% if grafico %}
        <input class="boton" type="submit" value="-1" name="actualizar_grafico"/>
        <input class="boton" type="submit" value="+1" name="actualizar_grafico"/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input class="boton" type="submit" value="-5" name="actualizar_grafico"/>
        <input class="boton" type="submit" value="+5" name="actualizar_grafico"/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input class="boton" type="submit" value="-10" name="actualizar_grafico"/>
        <input class="boton" type="submit" value="+10" name="actualizar_grafico"/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input class="boton" type="submit" value="-20" name="actualizar_grafico"/>
        <input class="boton" type="submit" value="+20" name="actualizar_grafico"/>
        {% endif %}
    </form>
    <br><br><br><br>
    {% if exito %}
    {{exito}}
    {%endif%}
    <br>
</div>

{% else %}

<br>
        <p><b>Nada que mostrar, no hay datos guardados para este usuario. Visita el apartado de Gestión de Datos para descargarlos de MetaTrader5.</b> <br> <br>
        </p>
{% endif %}

<div style="float: right; width: 45%;">
    <br><br><br><br>
    <a class="boton" href="{% url 'Menu Ver Datos'%}">Volver a visualización</a>

</div>

</body>


<script>
    // Accedemos a los botones
    var input_fecha = document.getElementById('inputFecha');
    var input_horas = document.getElementById('inputHoras');

    // evento para el input radio "horas"
    document.getElementById('ver_con_horas').addEventListener('click', function (e) {
        input_horas.disabled = false;
        input_fecha.disabled = true;
    });

    // evento para el input radio "fecha"
    document.getElementById('ver_con_fecha').addEventListener('click', function (e) {
        input_fecha.disabled = false;
        input_horas.disabled = true;
    });
</script>



</html>

{% endblock %}